document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("commentForm"),t=document.querySelector(".comments-list");function n(e){const t=new Date-e,n=Math.floor(t/1e3),a=Math.floor(n/60),s=Math.floor(a/60),o=Math.floor(s/24);return o>0?`Hace ${o} dÃ­a${o>1?"s":""}`:s>0?`Hace ${s} hora${s>1?"s":""}`:a>0?`Hace ${a} minuto${a>1?"s":""}`:"Hace un momento"}function a(e){const t=document.createElement("div");t.className="glass-card comment",t.innerHTML=`\n            <div class="comment-header">\n                <img src="${e.avatar||"/visual/images/default-avatar.png"}" alt="Avatar" class="user-avatar">\n                <div class="comment-info">\n                    <h3>${e.username}</h3>\n                    <span class="timestamp">${n(new Date)}</span>\n                </div>\n            </div>\n            <div class="comment-content">\n                <p>${e.content}</p>\n            </div>\n            <div class="comment-actions">\n                <button class="vote-btn upvote">\n                    <i class="fas fa-arrow-up"></i>\n                    <span class="vote-count">0</span>\n                </button>\n                <button class="reply-btn">\n                    <i class="fas fa-reply"></i> Responder\n                </button>\n            </div>\n            <div class="replies"></div>\n        `;const a=t.querySelector(".vote-btn");a.addEventListener("click",(()=>{const e=a.querySelector(".vote-count"),t=parseInt(e.textContent);e.textContent=t+1,a.classList.add("voted")}));return t.querySelector(".reply-btn").addEventListener("click",(()=>{const e=t.querySelector(".replies"),a=document.createElement("div");a.className="glass-card reply-form",a.innerHTML='\n                <form>\n                    <textarea placeholder="Escribe tu respuesta..." required></textarea>\n                    <div class="form-actions">\n                        <button type="submit" class="cta-button">\n                            <i class="fas fa-paper-plane"></i> Responder\n                        </button>\n                        <button type="button" class="cancel-btn">\n                            <i class="fas fa-times"></i> Cancelar\n                        </button>\n                    </div>\n                </form>\n            ';const s=e.querySelector(".reply-form");s?s.remove():e.insertBefore(a,e.firstChild);const o=a.querySelector("form");o.addEventListener("submit",(t=>{t.preventDefault();const s=o.querySelector("textarea").value;if(s.trim()){!function(e,t){const a=document.createElement("div");a.className="glass-card reply",a.innerHTML=`\n            <div class="comment-header">\n                <img src="${t.avatar}" alt="Avatar" class="user-avatar">\n                <div class="comment-info">\n                    <h3>${t.username}</h3>\n                    <span class="timestamp">${n(new Date)}</span>\n                </div>\n            </div>\n            <div class="comment-content">\n                <p>${t.content}</p>\n            </div>\n            <div class="comment-actions">\n                <button class="vote-btn upvote">\n                    <i class="fas fa-arrow-up"></i>\n                    <span class="vote-count">0</span>\n                </button>\n                <button class="reply-btn">\n                    <i class="fas fa-reply"></i> Responder\n                </button>\n            </div>\n        `;const s=a.querySelector(".vote-btn");s.addEventListener("click",(()=>{const e=s.querySelector(".vote-count"),t=parseInt(e.textContent);e.textContent=t+1,s.classList.add("voted")})),e.appendChild(a)}(e,{username:"Usuario Actual",content:s,avatar:"/visual/images/default-avatar.png"}),a.remove()}}));a.querySelector(".cancel-btn").addEventListener("click",(()=>{a.remove()}))})),t}e.addEventListener("submit",(n=>{n.preventDefault();const s=e.querySelector("textarea").value;if(s.trim()){const n=a({username:"Usuario Actual",content:s,avatar:"/visual/images/default-avatar.png"});t.insertBefore(n,t.firstChild),e.reset()}}))})),window.addEventListener("load",(function(){const e=document.getElementById("pdf-viewer"),t={toolbar:{toolbarViewerLeft:{visible:!1},toolbarViewerRight:{visible:!1},toolbarViewerMiddle:{visible:!1}},theme:{primary:"#2ecc71",secondary:"#27ae60"},view:{initialZoom:1,showThumbnails:!1,showBookmarks:!1}};e.addEventListener("load",(function(){const n=e.contentWindow;n.PDFViewerApplication&&n.PDFViewerApplication.initialize(t)}))}));