<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cuenta - TSAEC</title>
    <link rel="stylesheet" href="/src/styles/cuenta.css" />
    <link
      rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  </head>
  <body>
    <div class="form-container">
      <div class="car-container">
        <img
          src="/src/assets/images/auto-electrico.png"
          alt="Auto el√©ctrico"
          class="electric-car"
          id="carHome"
        />
        <div class="car-bubble">
          <p>Presi√≥name para regresar a casa üè†</p>
          <div class="bubble-arrow"></div>
        </div>
      </div>
    </div>
    <div class="form-container">
      <!-- Burbuja de mensaje Google -->
      <div class="message-bubble google-bubble">
        <img
          src="/src/assets/images/missa.png"
          alt="Missa"
          class="profile-pic"
        />
        <div class="bubble-content">
          <p>¬°Hola! üëã Puedes iniciar sesi√≥n m√°s r√°pido con Google</p>
          <button class="google-btn">
            <img src="/src/assets/images/google-icon.png" alt="Google" />
            Iniciar con Google
          </button>
        </div>
        <div class="bubble-arrow"></div>
      </div>

      <!-- Contenedor del formulario -->
      <div class="phone-container">
        <img
          src="/src/assets/images/mano-trasera.png"
          alt="Mano trasera"
          class="hand back-hand"
        />
        <div class="phone-wrapper">
          <img
            src="/src/assets/images/celular.png"
            alt="Celular"
            class="phone"
          />
          <form class="registro-form">
            <h2>Registro</h2>

            <div class="form-group">
              <label for="usuario">Nombre de usuario:</label>
              <input type="text" id="usuario" name="usuario" />
              <p class="error" id="error-usuario"></p>
            </div>

            <div class="form-group">
              <label for="email">Correo electr√≥nico:</label>
              <input type="email" id="email" name="email" />
              <p class="error" id="error-email"></p>
            </div>

            <div class="form-group">
              <label for="contrasena">Contrase√±a:</label>
              <input type="password" id="contrasena" name="contrasena" />
              <p class="error" id="error-contrasena"></p>
            </div>

            <div class="form-group">
              <label for="confirmar-contrasena">Confirmar contrase√±a:</label>
              <input
                type="password"
                id="confirmar-contrasena"
                name="confirmar-contrasena"
              />
              <p class="error" id="error-confirmar-contrasena"></p>
            </div>

            <button type="submit" class="submit-btn">Registrar</button>
            <p class="success" id="exito"></p>
            <p class="error" id="error"></p>
          </form>
        </div>
        <img
          src="/src/assets/images/mano-delantera.png"
          alt="Mano delantera"
          class="hand front-hand"
        />
      </div>

      <!-- Burbuja de error -->
      <div class="message-bubble error-bubble">
        <img
          src="/src/assets/images/missa.png"
          alt="Missa"
          class="profile-pic"
        />
        <div class="bubble-content">
          <p id="error-message"></p>
        </div>
        <div class="bubble-arrow"></div>
      </div>
    </div>

    <script>
      const form = document.querySelector(".registro-form");
      const errorBubble = document.querySelector(".error-bubble");
      const googleBubble = document.querySelector(".google-bubble");

      // Mostrar el mensaje de Google al cargar la p√°gina
      document.addEventListener("DOMContentLoaded", () => {
        showGoogleBubble();
      });

      // Funci√≥n para verificar si el formulario est√° vac√≠o
      function isFormEmpty() {
        const usuario = document.getElementById("usuario").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("contrasena").value;
        const confirmPassword = document.getElementById(
          "confirmar-contrasena"
        ).value;

        return !usuario && !email && !password && !confirmPassword;
      }

      // Escuchar cambios en los inputs del formulario
      form.querySelectorAll("input").forEach((input) => {
        input.addEventListener("input", () => {
          if (isFormEmpty()) {
            showGoogleBubble();
          } else {
            hideGoogleBubble();
          }
        });
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const usuario = document.getElementById("usuario").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("contrasena").value;
        const confirmPassword = document.getElementById(
          "confirmar-contrasena"
        ).value;

        if (!usuario) {
          showErrorMessage(
            "¬°Ops! Parece que olvidaste tu nombre de usuario üòÖ"
          );
          return;
        }

        if (!email) {
          showErrorMessage("¬°Hey! Necesito tu correo electr√≥nico üìß");
          return;
        }

        if (!password) {
          showErrorMessage("¬°Ups! La contrase√±a es obligatoria üîë");
          return;
        }

        if (password !== confirmPassword) {
          showErrorMessage("Las contrase√±as no coinciden üîê");
          return;
        }
      });

      function showErrorMessage(message) {
        const errorMessage = document.getElementById("error-message");
        errorMessage.textContent = message;
        errorBubble.classList.add("show");

        setTimeout(() => {
          errorBubble.style.animation = "fadeOut 0.5s ease forwards";
          setTimeout(() => {
            errorBubble.classList.remove("show");
            errorBubble.style.animation = "";
          }, 500);
        }, 4000);
      }

      function showGoogleBubble() {
        googleBubble.classList.add("show");
      }

      function hideGoogleBubble() {
        googleBubble.classList.remove("show");
      }

      const car = document.getElementById("carHome");
      const carBubble = document.querySelector(".car-bubble");

      car.addEventListener("click", () => {
        window.location.href = "/public/index.html";
      });

      car.addEventListener("mouseenter", () => {
        carBubble.classList.add("show");
      });

      car.addEventListener("mouseleave", () => {
        carBubble.classList.remove("show");
      });
    </script>
  </body>
</html>
